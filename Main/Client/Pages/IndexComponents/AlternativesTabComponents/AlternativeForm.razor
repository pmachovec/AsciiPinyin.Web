@using AsciiPinyin.Web.Client.Components
@using AsciiPinyin.Web.Shared.Constants
@using AsciiPinyin.Web.Shared.Models
@using AsciiPinyin.Web.Shared.Resources
@using Microsoft.AspNetCore.Components.Web

@inherits AlternativeFormBase

<div
    class="modal fade @CssClasses.D_NONE"
    tabindex="-1"
    role="dialog"
    id="@IDs.ALTERNATIVE_FORM_ROOT">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header justify-content-between">
                <h4 class="modal-title fw-bold ms-3" id="theCharacter">@Localizer[Resource.CreateNewAlternative]</h4>
                <CloseButton CloseAsync="CloseAsync" CancellationToken="CancellationToken.None" />
            </div>
            <div class="modal-body m-3">
                <form>
                    <div class="mb-3">
                        <div class="form-text mx-1 @CssClasses.TEXT_DARK">@Localizer[Resource.AlternativeCharacter]</div>
                        <div class="input-group">
                            <input
                                type="text"
                                class="form-control"
                                id="@IDs.ALTERNATIVE_FORM_THE_CHARACTER_INPUT"
                                @oninput="async changeEventArgs => await PreventMultipleCharactersAsync(changeEventArgs, CancellationToken.None)"
                                @onmousedown="async _ => await ClearWrongInputAsync(
                                    IDs.ALTERNATIVE_FORM_THE_CHARACTER_INPUT,
                                    IDs.ALTERNATIVE_FORM_THE_CHARACTER_ERROR,
                                    CancellationToken.None)">
                        </div>
                        <div
                            class="error-label form-text mx-1 mt-0 text-danger"
                            id="@IDs.ALTERNATIVE_FORM_THE_CHARACTER_ERROR">
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="form-text mx-1 @CssClasses.TEXT_DARK">@Localizer[Resource.NumberOfStrokes]</div>
                        <div class="input-group">
                            <input
                                type="number"
                                class="form-control"
                                min="@ByteConstants.MIN_STROKES"
                                max="@ByteConstants.MAX_STROKES"
                                id="@IDs.ALTERNATIVE_FORM_STROKES_INPUT"
                                @oninput="async changeEventArgs => await PreventStrokesInvalidAsync(changeEventArgs, CancellationToken.None)"
                                @onmousedown="async _ => await ClearWrongInputAsync(
                                    IDs.ALTERNATIVE_FORM_STROKES_INPUT,
                                    IDs.ALTERNATIVE_FORM_STROKES_ERROR,
                                    CancellationToken.None)">
                        </div>
                        <div
                            class="error-label form-text mx-1 mt-0 text-danger"
                            id="@IDs.ALTERNATIVE_FORM_STROKES_ERROR"></div>
                    </div>
                    <div class="mb-3">
                        <div class="form-text mx-1 @CssClasses.TEXT_DARK">@Localizer[Resource.BaseCharacter]</div>
                        <div class="input-group">
                            <button
                                type="button"
                                class="btn-input-text form-control"
                                @onclick="async _ => await OpenOriginalSelectorAsync(CancellationToken.None)">
                                @OriginalCharacter
                            </button>
                            <button
                                type="button"
                                class="btn @CssClasses.BTN_OUTLINE_PRIMARY"
                                @onclick="ClearOriginal">
                                &#x2715;
                            </button>
                        </div>
                        <div class="error-label form-text mx-1 mt-0 text-danger"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button
                    type="button"
                    class="btn btn-modal btn-primary"
                    aria-label="@Localizer[Resource.Save]"
                    id="@IDs.ALTERNATIVE_FORM_SUBMIT_BUTTON"
                    @onclick="async _ => await CheckAndSubmitAsync(CancellationToken.None)">
                    <span>@Localizer[Resource.Save]</span>
                </button>
            </div>
        </div>
    </div>
</div>
<EntitySelector
    @ref="OriginalSelector"
    TEntity="Chachar"
    Entities="Index.Chachars.Where(chachar => chachar.IsRadical)"
    HtmlTitle="@Localizer[Resource.SelectBaseCharacter]"
    Title="@Localizer[Resource.SelectBaseCharacter]"
    RootId="@IDs.ALTERNATIVE_FORM_ORIGINAL_SELECTOR"
    SelectEntityAsync="SelectOriginalAsync"/>
